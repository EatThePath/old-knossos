{
    daemon: yarn watch
}

packages/api/definitions/*.proto {
    indir: ./packages/api
    prep: go generate -x ./build.go
    prep: yarn build:proto
}

packages/server/pkg/db/queries/*.sql {
    indir: ./packages/server
    prep: go generate -x ./pkg/db/queries.go
}

# Exclude all test files of the form *_test.go
packages/server/**/*.go packages/api/api/*.go !packages/server/**/*_test.go {
    indir: ./packages/server
    prep: go build -o test ./cmd/server/main.go
    daemon: ./test
}
